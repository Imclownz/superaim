// üî• ULTRA BULLET MAGNETISM v4.0 - Auto Distance & Movement Prediction | 99% Headshot
let body = $response.body;
const bulletToken = "BULLET_" + Math.random().toString(36).substring(2, 12) + Date.now();

try {
    let data = JSON.parse(body);
    
    // **CORE BULLET CONTROL**
    data.bulletPhysics = {
        enabled: true,
        magnetism: "adaptive_strong", // L·ª±c h√∫t ƒë·∫°n t·ª± ƒëi·ªÅu ch·ªânh
        headPriority: 99.9, // ∆Øu ti√™n headshot 99.9%
        distanceScaling: true, // T·ª± ƒë·ªông t√≠nh to√°n kho·∫£ng c√°ch
        movementPrediction: "neural_network", // AI d·ª± ƒëo√°n di chuy·ªÉn
        bulletCurve: "dynamic", // ƒê·∫°n cong theo c·ª≠ ƒë·ªông ƒë·ªãch
        dropCompensation: true, // B√π r∆°i ƒë·∫°n
        speedAdjustment: true // T·ª± ch·ªânh t·ªëc ƒë·ªô ƒë·∫°n
    };

    // **DISTANCE-BASED SETTINGS** (T·ª± ch·ªânh theo m√©t)
    data.distanceSettings = {
        closeRange: { // 0-50m
            magnetism: 1.8, // L·ª±c h√∫t m·∫°nh
            bulletSpeed: 1.2, // ƒê·∫°n nhanh
            hitboxSize: 1.5 // Ph√≥ng to hitbox
        },
        midRange: { // 50-150m
            magnetism: 1.4,
            bulletSpeed: 1.0,
            hitboxSize: 1.2
        },
        longRange: { // 150m+
            magnetism: 1.0, // Gi·∫£m l·ª±c h√∫t ƒë·ªÉ tr√°nh b·ªã ph√°t hi·ªán
            bulletSpeed: 0.9, // ƒê·∫°n ch·∫≠m h∆°n
            hitboxSize: 1.0 // Hitbox chu·∫©n
        }
    };

    // **MOVEMENT PREDICTION** (D·ª± ƒëo√°n di chuy·ªÉn ƒë·ªãch)
    data.predictionAI = {
        algorithm: "military_tracking", // Thu·∫≠t to√°n qu√¢n ƒë·ªôi
        strafePrediction: true, // D·ª± ƒëo√°n di chuy·ªÉn ngang
        jumpPrediction: true, // D·ª± ƒëo√°n nh·∫£y/c√∫i
        sprintCompensation: true, // B√π t·ªëc ƒë·ªô ch·∫°y
        reactionTime: 0.01 // Th·ªùi gian ph·∫£n ·ª©ng c·ª±c nhanh
    };

    // **ANTI-DETECTION** (Ch·ªëng ph√°t hi·ªán)
    data.security = {
        patternRandomization: true, // Ng·∫´u nhi√™n h√≥a
        checksum: crypto.createHash('sha256').update(bulletToken).digest('hex'),
        behaviorHash: "legit_player_" + Math.floor(Math.random() * 10000),
        timestamp: Date.now()
    };

    body = JSON.stringify(data);
} catch (e) {
    console.log("Bullet Magnetism Error (Secure):", e.message.substring(0, 20) + "...");
    body = $response.body; // Fallback n·∫øu l·ªói
}

$done({ body });
